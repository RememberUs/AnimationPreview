{"version":3,"sources":["service.js","component.jsx","App.js","index.js"],"names":["Calculate","type","iw","ih","zoom_start","oh","Math","min","zoom_y0","delta_height","startYposition","endYposition","proposalY","planned_height","abs","startY","endY","preview_h","internal_w","result","up","zoom_end","zoom_yEnd","max","video_time","down","Element","props","uid","UUID","v1","filename","video_name","videoname","coordinates","direction","animationName","keyframes","preview_img_name","preview_container","img","container","styleSheet","document","styleSheets","insertRule","cssRules","length","className","title","id","alt","src","width","height","controls","playing","muted","loop","url","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.55e93c5b.chunk.js","sourcesContent":["function down(iw, ih){\n    if (iw / ih > 16/9) {\n        iw = ih * 16/9;\n    }\n    let video_time = 7;\n    let zoom_delta = 0.0005;\n    let fps        = 25;\n    let zoom_start = 1;\n    let zoom_end   = zoom_start + zoom_delta * fps * video_time;\n    let oh = ih;\n    if(iw * 9/16 < ih){\n        oh = iw * 9/16\n    }\n    //let ow = oh * 16/9;\n\n    let zoom_yEnd = (oh / 2 - oh/zoom_end/2);\n\n    let delta_height = ih - oh;\n    let startYposition = Math.max((delta_height / 6), 0.5 * ih - delta_height / 6) + 0.01 / video_time * delta_height / 6;\n    let endYposition   = Math.max((delta_height / 6), 0.5 * ih - delta_height / 6) + video_time / video_time * delta_height / 6 - zoom_yEnd;\n\n    let proportionX = 640 / iw;\n    let proposalY   = ih * proportionX;\n\n    if (iw / ih > 1.5) {\n        startYposition = endYposition;\n    }\n\n    if (iw / ih >= 1.6) {\n        let planned_height = iw * 9 / 16;\n        let delta_height = Math.abs(ih - planned_height);\n        startYposition = endYposition = delta_height;\n    }\n\n    let startY = (startYposition / ih) * 100;\n    let endY   = (endYposition / ih) * 100;\n\n    if (proposalY * 0.5 < 360 && (startY === endY)) {\n        if (ih/iw === 1 || iw / ih >= 1.6)\n        {\n            //do nothing\n        } else {\n            startY = endY = 0;\n        }\n    }\n    let startX = 0;\n    let ratio = iw / ih;\n\n    let preview_h = \"auto\";\n    let preview_w = \"25vw\";\n    let internal_w = \"25vw\";\n\n    if (640 / ratio <= 360)\n    {\n        // preview_h = \"360px\";\n        //preview_h = \"auto\";\n        internal_w = 25 * 1.15 + \"vw\";\n    } else {\n        preview_h = (25 / (16/9) ) + \"vw\";\n    }\n    let result = [];\n    result['startX'] = startX;\n    result['startY'] = startY;\n    result['zoom_start'] = zoom_start;\n    result['zoom_end'] = zoom_end;\n    result['endY'] = endY;\n    result['preview_w'] = preview_w;\n    result['preview_h'] = preview_h;\n    result['internal_w'] = internal_w;\n\n\n    return result;\n}\n\nfunction up(iw, ih){\n    let video_time = 7;\n    let zoom_delta = 0.0005;\n    let fps        = 25;\n    let zoom_start = 1.15;\n    let zoom_end   = zoom_start - zoom_delta * fps * video_time;\n    let oh = ih;\n    if(iw * 9/16 < ih){\n        oh = iw * 9/16\n    }\n    let zoom_y0 = (ih / 2 - ih / zoom_start / 2);\n\n    oh = Math.min(iw * 9 / 16, ih);\n    let ow = oh * 16 / 9;\n    let delta_height = ih - oh;\n\n    zoom_y0 = (oh / 2 - oh / zoom_start / 2);\n    let zoom_x0 = (ow / 2 - ow / zoom_start / 2);\n\n    let startYposition = 0.5 * ih - 0.01 / 7 * Math.min(0.5 * ih, delta_height / 6) - zoom_y0;\n    let endYposition   = 0.5 * ih - 7 / 7 * Math.min(0.5 * ih, delta_height / 6);\n\n    let zoomX_start = zoom_start;\n    let zoomX_end   = zoom_start;\n\n    let proportionX = 640 / iw;\n    let proposalY   = ih * proportionX;\n\n    if (proposalY * 0.5 < 360)\n    {\n        startYposition = endYposition;\n    }\n    if (iw / ih >= 1.6)\n    {\n        let planned_height = iw * 9 / 16;\n        delta_height = Math.abs(ih - planned_height);\n        startYposition = endYposition = delta_height;\n    }\n    if (ih / iw === 1)\n    {\n        startYposition = endYposition + zoom_y0;\n        zoomX_start    = 1;\n        zoomX_end      = 1;\n    }\n\n    if (ih / iw > 2)\n    {\n        startYposition = startYposition + zoom_y0 * 2;\n    }\n\n    let startY = (startYposition / ih) * 100;\n    let endY   = (endYposition / ih) * 100;\n\n    if (proposalY * 0.5 < 360 && (startY == endY))\n    {\n        if (ih / iw == 1 || (iw / ih >= 1.6 && iw / ih <= 1.9))\n        {\n            // do nothing\n        } else {\n            startY = endY = 0;\n        }\n    }\n\n    let startX = 0;\n\n    let preview_h = \"auto\";\n    let preview_w = \"25vw\";\n    let internal_w = \"25vw\";\n\n    let ratio = iw/ih;\n    if (ratio > 2 )\n    {\n        internal_w = 25 * 1.15 + \"vw\";\n        preview_h = (25 / (16/9) ) + \"vw\";\n    } else {\n        preview_h = (25 / (16/9) ) + \"vw\";\n    }\n\n    let result = [];\n    result['startX'] = startX;\n    result['startY'] = startY;\n    result['zoom_start'] = zoom_start;\n    result['zoom_end'] = zoom_end;\n    result['endY'] = endY;\n    result['preview_w'] = preview_w;\n    result['preview_h'] = preview_h;\n    result['internal_w'] = internal_w;\n\n    return result;\n}\n\nconst Calculate = function(type, iw, ih){\n    if(type === 'up'){\n        return up(iw, ih);\n    }\n    return down(iw, ih);\n}\n\nexport default Calculate;\n","import {default as UUID} from \"node-uuid\";\nimport ReactPlayer from 'react-player'\nimport Calculate from './service';\n\nfunction Element(props) {\n    let uid = UUID.v1();\n    let filename = props.filename;\n    let video_name = props.videoname;\n\n    let iw = props.iw;\n    let ih = props.ih;\n\n    let coordinates = Calculate(props.direction, iw, ih);\n\n    let animationName = `animatePreview_`+uid;\n    let keyframes =\n        `@keyframes ${animationName} {\n        0% { transform: translateY(-${coordinates['startY']}%) translateX(-${coordinates['startX']}%) scale(${coordinates['zoom_start']}) }\n        100% { transform: translateY(-${coordinates['endY']}%) translateX(-${coordinates['startX']}%) scale(${coordinates['zoom_end']}); }\n    }`;\n\n    let preview_img_name = \"preview-\"+uid;\n    let preview_container = \"container-\"+uid;\n    let img = `.${preview_img_name} {\n        animation: ${animationName} 7s linear;\n        animation-iteration-count: infinite;\n        width: ${coordinates['internal_w']}\n      }`;\n\n    let container=`.${preview_container}{\n        width: ${coordinates['preview_w']};\n        height: ${coordinates['preview_h']};\n        overflow: hidden;\n        margin-bottom: 1rem;\n        margin-right: 1rem;\n    }`;\n\n    let styleSheet = document.styleSheets[0];\n    styleSheet.insertRule(keyframes, styleSheet.cssRules.length);\n    styleSheet.insertRule(img, styleSheet.cssRules.length);\n    styleSheet.insertRule(container, styleSheet.cssRules.length);\n\n    return (\n        <div className=\"element_container\">\n            <h2>{props.title}</h2>\n            <div className=\"demo\">\n                <div className={preview_container}>\n                    <img id=\"preview_image\" alt=\"preview\" className={preview_img_name} src={filename}/>\n                </div>\n                <div className=\"video\">\n                    <ReactPlayer width={\"25vw\"} height={\"auto\"} controls playing={true} muted loop url={video_name} />\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Element;\n","import Element from './component'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n          <Element\n              title={\"Normal up\"}\n              iw={638}\n              ih={317}\n              filename={\"assets/digits-normal.png\"}\n              videoname={\"assets/digits-normal-up.mp4\"}\n              direction={\"up\"}/>\n\n          <Element\n              title={\"Normal down\"}\n              iw={638}\n              ih={317}\n              filename={\"assets/digits-normal.png\"}\n              videoname={\"assets/digits-normal-down.mp4\"}\n              direction={\"down\"}/>\n\n          <Element\n              title={\"Square up\"}\n              iw={600}\n              ih={600}\n              filename={\"assets/digits-square.png\"}\n              videoname={\"assets/digits-square-up.mp4\"}\n              direction={\"up\"}/>\n          <Element\n              title={\"Square down\"}\n              iw={600}\n              ih={600}\n              filename={\"assets/digits-square.png\"}\n              videoname={\"assets/digits-square-down.mp4\"}\n              direction={\"down\"}/>\n          <Element\n              title={\"Tall up\"}\n              iw={279}\n              ih={633}\n              filename={\"assets/digits-tall.png\"}\n              videoname={\"assets/digits-tall-up.mp4\"}\n              direction={\"up\"}/>\n          <Element\n              title={\"Tall down\"}\n              iw={279}\n              ih={633}\n              filename={\"assets/digits-tall.png\"}\n              videoname={\"assets/digits-tall-down.mp4\"}\n              direction={\"down\"}/>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}